# This plugin processes VISA source
#
# Author:
#	Лупашко Роман Владимирович
#	NSPK DI

## ****************************************************
#       Зона конфигурации плагина

# Инструкция REF обязательна и указывает на связанный объект.
# В для типа PARSER необходимо указать уникальное имя источника в {ref-name}
REF visa    # *раскомментировать

TYPE PARSER

# Инструкция FILE указывает, какие файлы важны для работы плагина.
# Если в плагине есть нагрузка (модель или парсер), то нужно указать и их.
# TYPE {filename}   # *раскомментировать
FILE SPPfile
FILE visa.py


## ****************************************************

## ****************************************************
#       Зона конфигурации задачи

# Инструкция SET restart-interval устанавливает интервал перезапуска задачи. Формат POSTGRESQL interval string
# Например: {interval string} = {2 days} или {1 week}
SET restart-interval 1 day

## ****************************************************

## ****************************************************
#       Зона конфигурации нагрузки

# Инструкция PAYLOAD указывает имя файла нагрузки.
# Файл должен иметь расширение .py и содержать класс нагрузки
PAYLOAD visa    # *раскомментировать

# Инструкция INIT устанавливает значения, объекты, который нужно передать в конструктор класса нагрузки при ее инициализации
#       keyword - название, по которому будет передаваться объект (key)
#       module - название модуля, который будет загружен
# INIT {keyword} {module}
INIT webdriver MODULE(WebDriver)

# Инструкция ENTRY устанавоивает точку входа. Это имя класса и метода, которые должна запустить платформа.
#       {entry method} по умолчанию - content
# ENTRY {payload classname} {entry method}
ENTRY VISA content

## ****************************************************

## ****************************************************
#       Зона конфигурации постобработки

# Инструкция ADD указывает модуль, который должен быть выполнен на этапе постобработки
#   ADD {module name} {params[]}
#       critical - флаг, который указывает, что выбранный модуль должен завершить работу без ошибок для продолжения работы постобработки

# Стандартная связка для парсеров
ADD TimezoneSafeControl critical
ADD FilterOnlyNewDocumentWithDB critical
ADD UploadDocumentToDB critical

## ****************************************************